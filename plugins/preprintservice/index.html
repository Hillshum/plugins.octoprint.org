<!DOCTYPE html>
<!--[if lt IE 7 ]><html class="ie ie6" lang="en"> <![endif]-->
<!--[if IE 7 ]><html class="ie ie7" lang="en"> <![endif]-->
<!--[if IE 8 ]><html class="ie ie8" lang="en"> <![endif]-->
<!--[if (gte IE 9)|!(IE)]><!-->
<html lang="en" xmlns="http://www.w3.org/1999/html"> <!--<![endif]-->
<head>
    <meta charset="utf-8" />
    <title>OctoPrint-PrePrintService</title>
    <meta name="description" content="This service supports your 3D printing workflow by providing auto-rotation and slicing functionality.">
    <meta name="author" content="Christoph Schranz">
    <meta name="referrer" content="same-origin">
    <meta name="google-site-verification" content="0EFsbaNygJcEinKPmzP-hTf0Ju6wDIpJxO5zvQtOQT0" />

    <!--[if lt IE 9]>
    <script src="/assets/js/html5shim-d55410eeb0d1e50b9558b594560e362529c60f3d70f808efe63dc16137b0226a.js" type="text/javascript" integrity="sha256-1VQQ7rDR5QuVWLWUVg42JSnGDz1w+Ajv5j3BYTewImo=" crossorigin="anonymous"></script>
    <![endif]-->

    <!-- Enable responsive viewport -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Le styles -->
    <link rel="stylesheet" type="text/css" href="/assets/css/site-216fddd6cfaf2568b0855c17eccc0e7a535aa7c84295f632bb599f60db84f5cd.css" integrity="sha256-IW/d1s+vJWiwhVwX7MwOelNap8hClfYyu1mfYNuE9c0=" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="/assets/css/bootstrap-responsive-c77a05ed6f7d09ff73e449cbc70b8bed232766c37371185af0d332e1d4a9cb3c.css" integrity="sha256-x3oF7W99Cf9z5EnLxwuL7SMnZsNzcRha8NMy4dSpyzw=" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="/assets/css/fontawesome-all.min-50c3c339da3ba3c3bf3060501d2862b4d0794e0fa4abaa5844b74a9d16f59697.css" integrity="sha256-UMPDOdo7o8O/MGBQHShitNB5Tg+kq6pYRLdKnRb1lpc=" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="/assets/css/prettify-30df8270395128e468d5c072b23ec9f8ef7265820f7e745251f9b703bc1962a9.css" integrity="sha256-MN+CcDlRKORo1cBysj7J+O9yZYIPfnRSUfm3A7wZYqk=" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="/assets/css/lightbox-4cb5722046a1da0569855a52d2fd670043c99af8b5cc8eac099bcb016a85ce48.css" integrity="sha256-TLVyIEah2gVphVpS0v1nAEPJmvi1zI6sCZvLAWqFzkg=" crossorigin="anonymous">

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/assets/img/tentacle-32x32.png">

    <!-- Le RSS feed -->
    <link rel="alternate" type="application/rss+xml" title="OctoPrint Plugin Repository: New Plugins" href="/feed.xml">

    <!-- Le social media meta data -->
    
    
    

    <meta name="twitter:card" content="summary" />
    <meta name="twitter:site" content="@OctoPrint3D" />
    <meta name="twitter:title" content="OctoPrint-PrePrintService" />
    <meta name="twitter:description" content="OctoPrint-PrePrintService

" />
    <meta name="twitter:image" content="https://plugins.octoprint.org" />

    <meta property="og:title" content="OctoPrint-PrePrintService" />
    <meta property="og:type" content="website" />
    <meta property="og:image" content="https://plugins.octoprint.org/assets/img/plugins/preprintservice/workflow.png" />
    <meta property="og:description" content="OctoPrint-PrePrintService

" />
    <meta property="og:site_name" content="OctoPrint Plugin Repository" />
    <meta property="og:url" content="https://plugins.octoprint.org/plugins/preprintservice/" />

    <meta itemscope itemtype="http://schema.org/WebPage" />
    <meta itemprop="headline" content="OctoPrint-PrePrintService" />
    <meta itemprop="description" content="OctoPrint-PrePrintService

" />
    <meta itemprop="image" content="https://plugins.octoprint.org/assets/img/plugins/preprintservice/workflow.png" />

    <script src="/assets/js/jquery-1.9.1.min-4b58dfeb119b2dd15f54e0a074cf8eb63204c8b03d45056e0b514e042f36aa44.js" type="text/javascript" integrity="sha256-S1jf6xGbLdFfVOCgdM+OtjIEyLA9RQVuC1FOBC82qkQ=" crossorigin="anonymous"></script>
    <script src="/assets/js/underscore.min-42d8fad13bc28fc726775196ec9ab953febf9bde175c5845128361c953fa17f4.js" type="text/javascript" integrity="sha256-Qtj60TvCj8cmd1GW7Jq5U/6/m94XXFhFEoNhyVP6F/Q=" crossorigin="anonymous"></script>

    <!-- Plausible -->
    <script defer data-domain="plugins.octoprint.org" src="https://plausible.octoprint.org/js/plausible.js"></script>

    <link rel="stylesheet" type="text/css" href="/assets/css/cookieconsent.min-b4bf981e76e71509875afcf5f4ad89e6d9b3bcba41fa20fc6a26226d5e162bd1.css" integrity="sha256-tL+YHnbnFQmHWvz19K2J5tmzvLpB+iD8aiYibV4WK9E=" crossorigin="anonymous">
    <script src="/assets/js/cookieconsent.min-e8aac0b7a7c3e3c17c621bf5bb24c098a602e4ad0c2867598f40d5ee49eca425.js" type="text/javascript" integrity="sha256-6KrAt6fD48F8Yhv1uyTAmKYC5K0MKGdZj0DV7knspCU=" crossorigin="anonymous"></script>
    <script>
        if (!String.prototype.startsWith) {
            String.prototype.startsWith = function(search, pos) {
            return this.substr(!pos || pos < 0 ? 0 : +pos, search.length) === search;
            };
        }

        window.addEventListener("load", function(){
            window.cookieconsent.initialise({
                "position": "bottom",
                "theme": "edgeless",
                "palette": {
                    "popup": {
                        "background": "#000000",
                        "link": "#10a800"
                    },
                    "button": {
                        "background": "#0b7500"
                    }
                }
            })
        });

        /**
         * Make sure octoprint.github.io stuff gets rewritten to plugins.octoprint.org.
         * See https://github.com/OctoPrint/plugins.octoprint.org/issues/146.
         */
        var githubio = "octoprint.github.io/plugins.octoprint.org";
        var url = window.location.href;
        if (url && (url.startsWith("http://" + githubio) || url.startsWith("https://" + githubio))) {
            url = url.replace(githubio, "plugins.octoprint.org");
            window.location.replace(url);
        }
    </script>
    <script src="/assets/js/github-6fd845e96926baa29e9f6356e813328514604d09846660936f4caf54ab9a5804.js" type="text/javascript" integrity="sha256-b9hF6WkmuqKen2NW6BMyhRRgTQmEZmCTb0yvVKuaWAQ=" crossorigin="anonymous"></script>
</head>

<body>

<a class="support-ukraine" href="https://supportukrainenow.org/" target="_blank" rel="nofollow noopener" title="We stand with Ukraine!">
  ðŸ‡ºðŸ‡¦ We stand with Ukraine! ðŸ‡ºðŸ‡¦
</a>

<div class="navbar navbar-inverse navbar-static-top">
  <div class="navbar-inner">
    <div class="container">
      <a class="brand" href="/"><img src="/assets/img/tentacle-20x20.png" alt="Tentacle logo" class="tentacle"> Plugin Repo</a>
      <a href="javascript:void(0)" class="btn btn-burger btn-navbar" data-toggle="collapse" data-target=".nav-collapse"><i class="fas fa-bars"></i></a>
      <div class="pull-right">
        <ul class="nav social-navbar">
          <li><a href="https://octoprint.org/merch/" title="Get some merchandise!" target="_blank"><i class="fa fa-shopping-basket"></i></a></li>
          <li><a href="https://octoprint.org/support-octoprint/" title="Support OctoPrint!" data-event-category="supportlink" data-event-action="navigation" target="_blank"><i class="fas fa-donate"></i></a></li>
        </ul>
      </div>
      <div class="nav-collapse collapse">
        <ul class="nav">
          <li class="dropdown">
            <a href="javascript:void(0)" class="dropdown-toggle" data-toggle="dropdown">Sorted by... <b class="caret"></b></a>
            <ul class="dropdown-menu">
              <li><a href="/by_name/">... name</a></li>
              <li><a href="/by_date/">... date</a></li>
              <li><a href="/by_tag/">... tag</a></li>
              <li><a href="/by_author/">... author</a></li>
            </ul>
          </li>
          <li class="dropdown">
            <a href="javascript:void(0)" class="dropdown-toggle" data-toggle="dropdown">Topics <b class="caret"></b></a>
            <ul class="dropdown-menu">
              
              <li><a href="/topics/power_control">Power Control (14 plugins)</a></li>
              
              <li><a href="/topics/remote_access">Remote Access (15 plugins)</a></li>
              
            </ul>
          </li>
          <li><form class="navbar-search pull-right" action="/search/" method="get"><input type="text" class="input-large search-query" placeholder="Enter search &amp; hit enter..." name="q"></form></li>
          <li class="dropdown">
            <a href="javascript:void(0)" class="dropdown-toggle" data-toggle="dropdown">Help <b class="caret"></b></a>
            <ul class="dropdown-menu">
              <li><a href="/help/installation/">Installing Plugins</a></li>
              <li><a href="/help/registering/">Registering Plugins</a></li>
              <li><a href="http://docs.octoprint.org/en/master/plugins/gettingstarted.html">The Plugin Tutorial</a></li>
              <li class="divider"></li>
              <li><a href="/help/github_integration/">GitHub Integration on plugins.octoprint.org</a></li>
            </ul>
          </li>
          <li class="dropdown">
            <a href="javascript:void(0)" class="dropdown-toggle" data-toggle="dropdown">Lists <b class="caret"></b></a>
            <ul class="dropdown-menu">
              <li><a href="/blacklist/">Blacklist</a></li>
              <li><a href="/notices/">Notices</a></li>
              <li><a href="/overlays/">Overlays</a></li>
              <li><a href="/abandoned/">Abandoned plugins</a></li>
            </ul>
          </li>
        </ul>
      </div>
    </div>
  </div>
</div>

<div id="wrap">
    <div id="main">
    






<div class="page-header">
  <div class="container">
    <div class="row">
      <div class="span12">
        <h1>OctoPrint-PrePrintService</h1>
      </div>
    </div>
  </div>
</div>

<div class="container">
  <div class="row-fluid">
    
    <small class="pull-left"><a href="/plugins/powerfailure/"><i class="fa fa-double-angle-left"></i>&nbsp;OctoPrint-PowerFailure</a></small>
    
    &nbsp;
    
    <small class="pull-right"><a href="/plugins/preheathelper/">OctoPrint-PreheatHelper&nbsp;<i class="fa fa-double-angle-right"></i></a></small>
    
  </div>
  <div class="content plugin-content row-fluid">
    <article class="post-content span8">
      
      
      
      

      <p class="lead">
        This service supports your 3D printing workflow by providing auto-rotation and slicing functionality.
      </p>
      <h1 id="octoprint-preprintservice">OctoPrint-PrePrintService</h1>

<p>OctoPrint-PrePrintService is a powerful solution designed to enhance your 3D printing workflow by automating the orientation and slicing of your 3D models. This service leverages two cutting-edge tools:</p>

<ul>
  <li><strong><a href="https://github.com/ChristophSchranz/Tweaker-3">Tweaker-3</a> for auto-orientation of FDM 3D prints</strong></li>
  <li><strong><a href="https://slic3r.org/">Slic3r</a> for slicing</strong></li>
</ul>

<p>For users of the <a href="https://ultimaker.com/software/ultimaker-cura">Cura</a> slicer, a similar toolchain can be set up using the <a href="https://marketplace.ultimaker.com/app/cura/plugins/fieldofview/OctoPrintPlugin">OctoPrint Connection</a> and <a href="https://marketplace.ultimaker.com/app/cura/plugins/nallath/OrientationPlugin">Auto-Orientation</a> plugins.</p>

<h2 id="workflow-in-octoprint">Workflow in OctoPrint</h2>

<p>The workflow can be deployed on a single machine or across two separate nodes as demonstrated below:</p>

<p><img src="/assets/img/plugins/preprintservice/workflow.png" alt="Workflow" /></p>

<p>The workflow consists of the following steps:</p>

<!-- Is the first step correct in the new layout, do we need the slicer tab? -->
<ol>
  <li>Upload a model on OctoPrint and click on the <code class="language-plaintext highlighter-rouge">Slice</code> button in the <code class="language-plaintext highlighter-rouge">file bar</code>.</li>
  <li>The model is auto-oriented for optimal 3D printing by <a href="https://github.com/ChristophSchranz/Tweaker-3">Tweaker-3</a> software.</li>
  <li>The oriented model is then sliced by <a href="https://slic3r.org/">Slic3r</a>.</li>
  <li>The final machine code is sent back to the OctoPrint server.</li>
  <li>You can start your print</li>
</ol>

<p>Each step can be customized by adjusting the settings as described in the documentation.</p>

<h2 id="requirements">Requirements</h2>

<ol>
  <li>One server node that is connected to your 3D printer, like a Raspberry Pi.</li>
  <li>One server node for pre-processing, which has at least 2GHz CPU frequency.
If the node connected to the printer is strong enough, one server suffices.</li>
  <li>Optional: Install <a href="https://www.docker.com/">Docker</a> version <strong>1.10.0+</strong>
and <a href="https://docs.docker.com/compose/install/">Docker Compose</a> version <strong>1.6.0+</strong>
on the more powerful node.</li>
</ol>

<h2 id="setup">Setup</h2>

<h3 id="1-set-up-the-preprintserivce-in-docker">1. Set up the PrePrintSerivce in Docker</h3>

<p>For high availability, it is recommended to deploy the PrePrint-Service in Docker.
Make sure to select the appropriate CPU architecture of the server node in the argument <code class="language-plaintext highlighter-rouge">SLIC3R_VERSION</code> for the installation of Slic3r in <code class="language-plaintext highlighter-rouge">docker-compose.yml</code>, see <a href="https://github.com/prusa3d/PrusaSlicer/releases">here</a>.</p>

<p>To run the application locally, use:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git clone https://github.com/christophschranz/OctoPrint-PrePrintService --recurse-submodules
cd OctoPrint-PrePrintService
docker-compose up --build -d
docker-compose logs -f
</code></pre></div></div>

<p>The service is available at <a href="http://localhost:2304/tweak">localhost:2304/tweak</a> (on the server node), where a simple UI and API documentation are provided for testing the PrePrint Service. Use <code class="language-plaintext highlighter-rouge">docker-compose down</code> to stop the service.</p>

<p><img src="/assets/img/plugins/preprintservice/PrePrintService.png" alt="PrePrint Service" /></p>

<h3 id="2-install-the-preprintservice-plugin">2. Install the PrePrintService Plugin</h3>

<p>Install the <a href="https://plugins.octoprint.org/plugins/preprintservice/"><strong>PrePrintService Plugin</strong></a> using the <a href="http://docs.octoprint.org/en/master/bundledplugins/pluginmanager.html">Plugin Manager</a> (under <code class="language-plaintext highlighter-rouge">Get More</code> with the name <code class="language-plaintext highlighter-rouge">PrePrintService Plugin</code>
or manually using the URL on the Printer-Controller</p>

<p>Configure the plugin in the OctoPrint settings, ensuring that the URL for the PrePrint service (docker) is set correctly.
Make also sure to use the correct URL of the Octoprint server and copy and paste the Octoprint API-key that can be found under settings, <code class="language-plaintext highlighter-rouge">API</code>.</p>

<p>Save and return to the OctoPrint home UI, click the Slice button on uploaded STL models, and generate printable machine code using this Preprocessing-Plugin. If the small slicing button of the STL files loaded (right of the trash symbol) is deactivated, Octoprint canâ€™t reach the PrePrintService.</p>

<p><img src="/assets/img/plugins/preprintservice/settings3.png" alt="PrePrint Service Settings" /></p>

<h3 id="3-optional-install-plugins-to-visualize-models">3. (optional) Install Plugins to visualize models</h3>

<p>Plugins to visualize STL models and GCode improve the workflow.
Therefore install the <strong>GCode Viewer</strong>() and <strong>Slicer</strong>(https://github.com/kennethjiang/OctoPrint-Slicer).</p>

<p>As soon as installed and reloaded, the new Slicer-Tab can be used to load STL-files via the modelâ€™s <code class="language-plaintext highlighter-rouge">slice</code>-button and
sent to the PrePrintService with a Slicing Profile and Output Filename.</p>

<p><img src="/assets/img/plugins/preprintservice/OctoPrint_navbar.png" alt="Octoprint Slicer" /></p>

<h2 id="testing">Testing</h2>

<p>To test the entire setup, follow these steps:</p>

<ol>
  <li>
    <p>Check if the docker service runs appropriately without errors: <code class="language-plaintext highlighter-rouge">docker-compose logs -f</code></p>
  </li>
  <li>
    <p>Visit <a href="http://localhost:2304/tweak">localhost:2304/tweak</a>, select an STL model file and perform an extended Tweak (auto-rotation) without slicing. The output should be an auto-rotated (binary) STL model. If not, check the Docker service logs using <code class="language-plaintext highlighter-rouge">docker-compose logs -f</code> in the directory where <code class="language-plaintext highlighter-rouge">docker-compose.yml</code> is located.</p>
  </li>
  <li>
    <p>Repeat the process with slicing enabled. The resulting file should be a G-code file of the model. If not, check the Docker service logs using <code class="language-plaintext highlighter-rouge">docker-compose logs -f</code> in the same folder.</p>
  </li>
  <li>
    <p>Visit the OctoPrint server, click the <strong><code class="language-plaintext highlighter-rouge">Slice</code>-Button</strong>  for the uploaded STL model in the file bar, and generate printable machine code using this PrePrint-Service Plugin. After a few seconds, a <code class="language-plaintext highlighter-rouge">.gco</code> file should be uploaded.
If this doesnâ€™t work, start the OctoPrint server using the command <code class="language-plaintext highlighter-rouge">octoprint serve</code>
 and monitor the logs with <code class="language-plaintext highlighter-rouge">tail -f .octoprint/logs/octoprint.log</code>. The following two lines are expected:</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> 2019-04-07 22:28:44,301 - octoprint.plugins.preprintservice - INFO - Connection to PrePrintService on http://192.168.48.81:2304/tweak is ready, status code 200
</code></pre></div>    </div>

    <p>If the the PrePrint Server canâ€™t be reached, you will see this:</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> 2019-04-07 22:27:34,746 - octoprint.plugins.preprintservice - WARNING - Connection to PrePrint Server on http://192.168.48.81:2304/tweak couldn't be established
</code></pre></div>    </div>

    <p>Make also sure that your selected <code class="language-plaintext highlighter-rouge">profile</code> file is correct. An invalid profile would look result in:</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> 2020-02-05 21:20:28,777 - octoprint.plugins.preprintservice - ERROR - Got http error code 500 on request http://192.168.48.48:2304/tweak
 2020-02-05 21:20:28,778 - octoprint.plugins.preprintservice - INFO - Couldn't post to http://192.168.48.48:2304/tweak
</code></pre></div>    </div>
  </li>
</ol>

<p>If you encounter any issues setting up this plugin or have suggestions for improving these instructions, please let us know!</p>

<h2 id="preprint-service-api">PrePrint-Service API</h2>

<p>You can use the API to preprocess your models for 3D printing. The documentation is available when the server is running at  <a href="http://localhost:2304/api/">http://localhost:2304/api/</a>. 
To interact with the API in Python, follow the example below:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">"http://localhost:2304/tweak"</span>
<span class="n">model_path</span> <span class="o">=</span> <span class="s">'preprintservice_src/uploads/model.stl'</span>
<span class="n">profile_path</span> <span class="o">=</span> <span class="s">'preprintservice_src/profiles/profile_015mm_brim.profile'</span>
<span class="n">output_path</span> <span class="o">=</span> <span class="s">'gcode_name.gcode'</span>

<span class="c1"># Auto-rotate file without slicing
</span><span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">files</span><span class="o">=</span><span class="p">{</span><span class="s">'model'</span><span class="p">:</span> <span class="nb">open</span><span class="p">(</span><span class="n">model_path</span><span class="p">,</span> <span class="s">'rb'</span><span class="p">)},</span>
                  <span class="n">data</span><span class="o">=</span><span class="p">{</span><span class="s">"tweak_actions"</span><span class="p">:</span> <span class="s">"tweak"</span><span class="p">})</span>

<span class="c1"># Only slice the model to a gcode
</span><span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">files</span><span class="o">=</span><span class="p">{</span><span class="s">'model'</span><span class="p">:</span> <span class="nb">open</span><span class="p">(</span><span class="n">model_path</span><span class="p">,</span> <span class="s">'rb'</span><span class="p">),</span>
                              <span class="s">'profile'</span><span class="p">:</span> <span class="nb">open</span><span class="p">(</span><span class="n">profile_path</span><span class="p">,</span> <span class="s">'rb'</span><span class="p">)},</span>
                <span class="n">data</span><span class="o">=</span><span class="p">{</span><span class="s">"machinecode_name"</span><span class="p">:</span> <span class="n">output_path</span><span class="p">,</span>
                        <span class="s">"tweak_actions"</span><span class="p">:</span> <span class="s">"slice"</span><span class="p">})</span>

<span class="c1"># Auto-rotate and slice the model file
</span><span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">files</span><span class="o">=</span><span class="p">{</span><span class="s">'model'</span><span class="p">:</span> <span class="nb">open</span><span class="p">(</span><span class="n">model_path</span><span class="p">,</span> <span class="s">'rb'</span><span class="p">),</span> <span class="s">'profile'</span><span class="p">:</span> <span class="nb">open</span><span class="p">(</span><span class="n">profile_path</span><span class="p">,</span> <span class="s">'rb'</span><span class="p">)},</span>
                  <span class="n">data</span><span class="o">=</span><span class="p">{</span><span class="s">"machinecode_name"</span><span class="p">:</span> <span class="n">output_path</span><span class="p">,</span> <span class="s">"tweak_actions"</span><span class="p">:</span> <span class="s">"tweak slice"</span><span class="p">})</span>
<span class="k">print</span><span class="p">(</span><span class="n">r</span><span class="p">.</span><span class="n">status_code</span><span class="p">)</span>
<span class="n">return_object</span> <span class="o">=</span> <span class="n">r</span><span class="p">.</span><span class="n">text</span>
</code></pre></div></div>

<p>The resulting object, either a tweaked STL file or a G-code file, is accessible via <code class="language-plaintext highlighter-rouge">r.text</code>, which may be several MB in size.</p>

<p>Information on interacting with OctoPrintâ€™s API is available <a href="http://docs.octoprint.org/en/master/api/files.html#upload-file-or-create-folder">here</a>.
You can test the file upload API using the following example:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">requests</span>

<span class="c1"># OctoPrint's URL using the default port 5000 and the API including the API-key
</span><span class="n">url</span> <span class="o">=</span> <span class="s">"http://192.168.48.43:5000/api/files/local?apikey=A943AB47727A461XXXXXXXXXXXX"</span>
<span class="n">model_path</span> <span class="o">=</span> <span class="s">'preprintservice_src/uploads/model.stl'</span>

<span class="c1"># Upload a file using OctoPrint's API
</span><span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">,</span> <span class="n">files</span><span class="o">=</span><span class="p">{</span><span class="s">'file'</span><span class="p">:</span> <span class="nb">open</span><span class="p">(</span><span class="n">model_path</span><span class="p">,</span> <span class="s">'rb'</span><span class="p">)})</span>
<span class="k">print</span><span class="p">(</span><span class="n">r</span><span class="p">.</span><span class="n">status_code</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">r</span><span class="p">.</span><span class="n">json</span><span class="p">(),</span> <span class="n">indent</span><span class="o">=</span><span class="mi">2</span><span class="p">))</span>
</code></pre></div></div>

<h2 id="common-issues">Common issues</h2>

<ul>
  <li><code class="language-plaintext highlighter-rouge">docker-compose</code> returns an error about unsupported CPU, e.g.:
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> ERROR: for pre-print-service  Cannot create container for service pre-print-service: NanoCPUs can not be set, as your kernel does not support CPU CFS scheduler or the cgroup is not mounted
 ERROR: Encountered errors while bringing up the project.
</code></pre></div>    </div>
    <p>The reason could be that the container trys to install Slic3r for the wrong CPU architecture. 
 Select an appropriate <code class="language-plaintext highlighter-rouge">SLIC3R_VERSION</code> in the <code class="language-plaintext highlighter-rouge">args</code> field in <code class="language-plaintext highlighter-rouge">docker-compose.yml</code>, i.e., <code class="language-plaintext highlighter-rouge">x64</code> for most servers and <code class="language-plaintext highlighter-rouge">armv7l</code> for a Raspberry Pi.</p>
  </li>
</ul>

<h2 id="note-of-the-developer">Note of the developer</h2>

<p>I hope this PrePrintService improves your 3D printing workflow!</p>

<p>When using in academic works please cite:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Schranz, C. (2016). Tweaker - Auto Rotation Module for FDM 3D Printing. https://doi.org/10.13140/RG.2.2.27593.36966
</code></pre></div></div>

<p>This plugin, as well as the auto-rotation module
<a href="https://github.com/ChristophSchranz/Tweaker-3">Tweaker-3</a> was developed in my spare time.
If you like it, I would be thankful about a cup of coffee :)</p>

<p><a href="https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&amp;hosted_button_id=RG7UBJMUNLMHN&amp;source=url"><img src="https://img.shields.io/badge/Donate-PayPal-green.svg" alt="More coffee, more code" /></a></p>

<p>Happy Printing!</p>


      
    </article>

    <div class="span4">
      <dl class="adbox">
        <dd class="ad">
          <script>
    if (!window["carbon-disable"]) {
        (function() {
            var po = document.createElement("script");
            po.type = "text/javascript";
            po.async = true;
            po.src  = "//cdn.carbonads.com/carbon.js?serve=CK7DT237&placement=pluginsoctoprintorg";
            po.id = "_carbonads_js";
            var s = document.currentScript;
            s.parentNode.insertBefore(po, s);
        })();
    }
</script>
        </dd>
      </dl>
      
      <dl class="installation">
        <dt>Installation <a href="/help/installation/" class="fas fa-question-circle"></a></dt>
        
        <dd>
          URL:
          <pre>https://github.com/christophschranz/OctoPrint-PrePrintService/archive/master.zip</pre>
          
        </dd>
        
        
        <dd>
          Command line:
          <pre>pip install "https://github.com/christophschranz/OctoPrint-PrePrintService/archive/master.zip"</pre>
        </dd>
        
      </dl>
      
      
      <dl class="date">
        <dt>Registration date</dt>
        <dd>12 May 2019</dd>
      </dl>
      
      
      <dl class="installations">
        <dt>Active instances the past month</dt>
        <dd>Installed on at least <strong>30</strong> instances</dd>
      </dl>
      
      
      <dl class="install_events">
        <dt>New installs the past week</dt>
        <dd>At least <strong>3</strong> new installations</dd>
      </dl>
      
      
      <dl class="github">
        <dt>GitHub stats <a href="/help/github_integration/" class="fas fa-question-circle"></a> <span id="github_login">(<a href="javascript:void(0)">Login</a>)</span></dt>
        <dd>
          <ul>
            
            <li>Stars: <span id="github_star_count">11</span> <span id="github_star"><a href="javascript:void(0)"><i class="far fa-star"></i></a></span></li>
            <li>Issues: 0 open, 8 closed</li>
            <li>Last push: 17 Apr 2023</li>
          </ul>
        </dd>
      </dl>
      
      
      <dl class="tags">
        <dt>Tags</dt>
        <dd>
          
          
          
          
          <a class="label" href="/by_tag/#tag-auto-orientation">auto-orientation</a>
          
          <a class="label" href="/by_tag/#tag-auto-rotate">auto-rotate</a>
          
          <a class="label" href="/by_tag/#tag-gcode">gcode</a>
          
          <a class="label" href="/by_tag/#tag-orientation">orientation</a>
          
          <a class="label" href="/by_tag/#tag-slic3r">slic3r</a>
          
          <a class="label" href="/by_tag/#tag-slicing">slicing</a>
          
          <a class="label" href="/by_tag/#tag-stl">stl</a>
          
          <a class="label" href="/by_tag/#tag-tweak">tweak</a>
          
        </dd>
      </dl>
      
      <dl class="compatibility">
        <dt>Compatibility Information</dt>
        <dd>
          <ul>
            
            <li>OctoPrint: 1.3.0+</li>
            
            
            <li>Operating Systems: Linux, Windows, Mac OS X</li>
            
            
            <li>Python: &gt;=2.7,&lt;4</li>
            
          </ul>
        </dd>
      </dl>
      
      <dl class="author">
        <dt>Author</dt>
        <dd>
<a href="/by_author/#christoph-schranz">Christoph Schranz</a>
</dd>
      </dl>
      
      
      <dl class="homepage">
        <dt>Homepage</dt>
        <dd><a href="https://github.com/christophschranz/OctoPrint-PrePrintService" target="_blank">https://github.com/christophschranz/OctoPrint-PrePrintService</a></dd>
      </dl>
      
      
      <dl class="source">
        <dt>Source</dt>
        <dd><a href="https://github.com/christophschranz/OctoPrint-PrePrintService" target="_blank">https://github.com/christophschranz/OctoPrint-PrePrintService</a></dd>
      </dl>
      
      
      
      <dl class="license">
        <dt>License</dt>
        <dd>AGPLv3</dd>
      </dl>
      
      <dl class="issue">
        <dt>Something wrong here?</dt>
        <dd>
          <p>
            If there is <strong>something wrong with this listing</strong> (broken links & images etc), please
            <a href="https://github.com/OctoPrint/plugins.octoprint.org/issues/new?template=listing_error.yml&labels%5B%5D=listing+error&title=%5BListing+Error%5D+OctoPrint-PrePrintService&which_plugin=https%3A%2F%2Fplugins.octoprint.org%2Fplugins%2Fpreprintservice%2F">report it here</a>.
          </p>
          <p>
            If this plugin <strong>has been <em>confirmed</em> as abandoned</strong> by its maintainer, please
            <a href="https://github.com/OctoPrint/plugins.octoprint.org/issues/new?template=abandoned_plugin.yml&labels%5B%5D=abandoned+plugin&title=%5BAbandoned+Plugin%5D+OctoPrint-PrePrintService&which_plugin=https%3A%2F%2Fplugins.octoprint.org%2Fplugins%2Fpreprintservice%2F">report it here</a>.
          </p>
          <p>
            If this plugin is <strong>doing something suspicious</strong> (e.g. weird network activity, unannounced tracking, ...) and
            the maintainer is not cooperating in getting to the bottom of that, please
            <a href="https://github.com/OctoPrint/plugins.octoprint.org/issues/new?template=suspicious_plugin_activity.yml&labels%5B%5D=suspicious+plugin+activity&title=%5BSuspicious+Plugin+Activity%5D+OctoPrint-PrePrintService&which_plugin=https%3A%2F%2Fplugins.octoprint.org%2Fplugins%2Fpreprintservice%2F">report the plugin as suspicious here</a>.
          </p>
          <p>
            Report bugs or feature requests for the plugin to the plugin author (e.g. on the plugin's <a href="https://github.com/christophschranz/OctoPrint-PrePrintService">homepage</a>) please, not here!
          </p>
        </dd>
      </dl>
    </div>

  </div>
</div>

<script type="application/javascript">
  $(function() {
    var has_github = true;
    if (has_github) {
      var github_repo = "christophschranz/OctoPrint-PrePrintService";

      if (github_repo) {
        var status = "unknown";

        var starSpan = $("#github_star");
        $("a", starSpan).click(function() {
          switch (status) {
            case "starred": {
              window.githubUnstar(github_repo)
                .done(function() {
                  markAsUnstarred();
                  updateStarcount();
                })
                .fail(markAsLoggedout);
              break;
            }
            case "unstarred": {
              window.githubStar(github_repo)
                .done(function() {
                  markAsStarred();
                  updateStarcount();
                })
                .fail(markAsLoggedout);
              break;
            }
            case "loggedout": {
              window.githubLogin()
                .done(determineStatus);
              break;
            }
          }
        });
        starSpan.hide();

        var login = $("#github_login");
        $("a", login).click(function() {
          switch (status) {
            case "loggedout": {
              window.githubLogin()
                .done(determineStatus);
              break;
            }
            case "starred":
            case "unstarred": {
              window.githubLogout()
                .done(determineStatus);
              break;
            }
          }
        });

        var starCount = $("#github_star_count");

        var markAsStarred = function() {
          status = "starred";
          $("i.fa-star", starSpan).removeClass("far").addClass("fas");
          $("a", login).text("Logout");
        }
        var markAsUnstarred = function() {
          status = "unstarred";
          $("i.fa-star", starSpan).removeClass("fas").addClass("far");
          $("a", login).text("Logout");
        };
        var markAsLoggedout = function() {
          status = "loggedout";
          $("a", login).text("Login");
        };
        var updateStarcount = function() {
          window.githubRepo(github_repo)
            .done(function(response) {
              starCount.text(response.stargazers_count);
            });
        }
        var determineStatus = function() {
          window.githubStatus(github_repo)
            .done(function(starred) {
              if (starred) {
                markAsStarred();
              } else {
                markAsUnstarred();
              }
              starSpan.show();
              updateStarcount();
            })
            .fail(function() {
              markAsLoggedout();
              starSpan.hide();
            });
        }

        determineStatus();
      }
    }
  });
</script>

    </div>
</div>

      <footer>
          <div class="container">
              <div class="row">
                  <div class="span4">
                      <h2>On the web</h2>
                      <ul class="fa-ul">
                        <li><span class="fa-li"><i class="fab fa-github fa-fw"></i></span><a href="https://github.com/OctoPrint/OctoPrint" target="_blank">GitHub</a></li>
                        <li><span class="fa-li"><i class="fas fa-users fa-fw"></i></span><a href="https://community.octoprint.org" target="_blank">Community Forum</a></li>
                        <li><span class="fa-li"><i class="fab fa-discord fa-fw"></i></span><a href="https://discord.octoprint.org" target="_blank">Discord</a></li>
                        <li><span class="fa-li"><i class="fas fa-hashtag fa-fw"></i></span><a href="ircs://irc.libera.chat:6697/#octoprint" target="_blank">IRC</a> (#octoprint on <a href="https://libera.chat" target="_blank">libera.chat</a>)</li>
                        <li><span class="fa-li"><i class="fab fa-mastodon fa-fw"></i></span><a href="https://fosstodon.org/@octoprint" target="_blank" rel="me">Mastodon</a></li>
                        <li><span class="fa-li"><i class="fab fa-facebook-f fa-fw"></i></span><a href="https://facebook.com/OctoPrint" target="_blank" rel="me">Facebook</a></li>
                        <li><span class="fa-li"><i class="fab fa-youtube fa-fw"></i></span><a href="https://www.youtube.com/c/OctoPrint3D" target="_blank">YouTube</a></li>
                        <li><span class="fa-li"><i class="fas fa-tachometer-alt fa-fw"></i></span><a href="https://status.octoprint.org" target="_blank">Site Status</a></li>
                        <li><span class="fa-li"><i class="fas fa-hammer fa-fw"></i></span><a href="https://octoprint.org/conduct/" rel="nofollow">Code of Conduct</a></li>
                        <li><span class="fa-li"><i class="fas fa-lock fa-fw"></i></span><a href="https://octoprint.org/security/" rel="nofollow">Security Policy</a></li>
                      </ul>
                  </div>
                  <div class="span4">
                      <h2>Recently Added</h2>
                      <ul>
                          
                          
                          <li>
                              <a class="post-link" href="/plugins/ssd1306_oled_display/">SSD1306 OLED Display</a>
                          </li>
                          
                          <li>
                              <a class="post-link" href="/plugins/turn_off_heat_on_pause_timer/">OctoPrint-TurnOffHeatOnPauseTimer</a>
                          </li>
                          
                          <li>
                              <a class="post-link" href="/plugins/influxdb2/">InfluxDB2</a>
                          </li>
                          
                          <li>
                              <a class="post-link" href="/plugins/powerfailure/">OctoPrint-PowerFailure</a>
                          </li>
                          
                          <li>
                              <a class="post-link" href="/plugins/MacroSteps/">OctoPrint-MacroSteps</a>
                          </li>
                          
                      </ul>
                  </div>
                  <div class="span4 hidden-phone">
                      <a href="http://octoprint.org"><img src="/assets/img/logo-footer.png" alt="Octopus logo" class="pull-right"></a>
                  </div>
              </div>
              <div class="row">
                  <div class="span12 text-center legal">
                      <small>"OctoPrint" is a <a href="http://octoprint.org/trademark-rules/">registered trademark</a> &middot; <a href="https://octoprint.org/imprint/" rel="nofollow">Imprint</a> &middot; <a href="https://octoprint.org/privacy/" rel="nofollow">Privacy Policy</a></small>
                  </div>
              </div>
          </div>
      </footer>

<script src="/assets/js/prettify-a2ae206579112903445f0c0d4b98f31ab901db28e8873dc7c81ce40a06372745.js" type="text/javascript" integrity="sha256-oq4gZXkRKQNEXwwNS5jzGrkB2yjohz3HyBzkCgY3J0U=" crossorigin="anonymous"></script>
<script src="/assets/js/bootstrap.min-f5651a6e18f88581d9be3cf06328fede9e112943c9ec037b4c2c1dc623d9429b.js" type="text/javascript" integrity="sha256-9WUabhj4hYHZvjzwYyj+3p4RKUPJ7AN7TCwdxiPZQps=" crossorigin="anonymous"></script>
<script src="/assets/js/lunr.min-a639270160a101546ac6c6373b24d7422b4a37bdb938d8eaa5ec3ebefdd343f8.js" type="text/javascript" integrity="sha256-pjknAWChAVRqxsY3OyTXQitKN725ONjqpew+vv3TQ/g=" crossorigin="anonymous"></script>
<script src="/assets/js/mustache-9a85a65d19dc9967bca5e7bb155e1f822b42740fd2ee04f3a1fd73da4ce3cad8.js" type="text/javascript" integrity="sha256-moWmXRncmWe8pee7FV4fgitCdA/S7gTzof1z2kzjytg=" crossorigin="anonymous"></script>
<script src="/assets/js/URI.min-569c0cdd34d9826a0e5b1ab3ead135e14c06281a71de90aa8e2aea35e8c9db75.js" type="text/javascript" integrity="sha256-VpwM3TTZgmoOWxqz6tE14UwGKBpx3pCqjirqNejJ23U=" crossorigin="anonymous"></script>
<script src="/assets/js/date.format-7f5d1885a0cf226d38cb313b8cd4397e02c8fe8fd1cc2004c2eb949ada1bdaf5.js" type="text/javascript" integrity="sha256-f10YhaDPIm04yzE7jNQ5fgLI/o/RzCAEwuuUmtob2vU=" crossorigin="anonymous"></script>
<script src="/assets/js/jquery.lunr.search-145b1699bf8e6b3e590f15ea32ffdb5440b017717fc8da8924e09cc9c7715378.js" type="text/javascript" integrity="sha256-FFsWmb+Oaz5ZDxXqMv/bVECwF3F/yNqJJOCcycdxU3g=" crossorigin="anonymous"></script>
<script src="/assets/js/lightbox.min-40fdcc195c5982250c8901f2c160e15342941a311faf6372c04117c0d9c44bc7.js" type="text/javascript" integrity="sha256-QP3MGVxZgiUMiQHywWDhU0KUGjEfr2NywEEXwNnES8c=" crossorigin="anonymous"></script>
<script src="/assets/js/site-9cd3c1f2763a9bba048afaa1d65885869520587e0f536ffb0bf93598428371fd.js" type="text/javascript" integrity="sha256-nNPB8nY6m7oEivqh1liFhpUgWH4PU2/7C/k1mEKDcf0=" crossorigin="anonymous"></script>
<script src="/assets/js/yt-with-consent-93662d2c310d0341065cd518f3d448995e3b7e44c87151bce9449b14846a5b6e.js" type="text/javascript" integrity="sha256-k2YtLDENA0EGXNUY89RImV47fkTIcVG86USbFIRqW24=" crossorigin="anonymous"></script>

</body>
</html>
